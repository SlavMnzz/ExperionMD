const messages = [
    "Tidak!, Sepertinya Raja Vorlando Telah Datang ğŸ«£",
    "ğ——ğ—”ğ—¥ğ—”ğ—› ğ—ğ—”ğ— ğ—¨ ğ—•ğ—˜ğ—¥ğ—ğ—¨ğ—¥ğ—”ğ—¡ğ—š?, ğ— ğ—œğ—¡ğ—¨ğ—  .ğ—½ğ—¼ğ˜ğ—¶ğ—¼ğ—» ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—¦ğ—˜ğ—›ğ—”ğ—§ ğ—ğ—˜ğ— ğ—•ğ—”ğ—Ÿğ—œ ğŸ¶",
    "ğ—”ğ—¬ğ—¢ ğ—”ğ——ğ—¨ ğ—›ğ—˜ğ—ªğ—”ğ—¡ ğ—£ğ—˜ğ—Ÿğ—œğ—›ğ—”ğ—¥ğ—”ğ—”ğ—¡ğ— ğ—¨ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—¡ğ——ğ—”ğ—£ğ—”ğ—§ğ—ğ—”ğ—¡ ğ—¨ğ—”ğ—¡ğ—š ğ—§ğ—”ğ— ğ—•ğ—”ğ—›ğ—”ğ—¡ ğŸ¤ ",
    "ğ—›ğ—¨ğ—§ğ—”ğ—¡ ğ—¦ğ—˜ğ—£ğ—›ğ—œğ—Ÿğ—˜ğ—¦ ğ—§ğ—˜ğ—Ÿğ—”ğ—› ğ—›ğ—”ğ—¡ğ—–ğ—¨ğ—¥!, ğ—•ğ—¨ğ—¥ğ—¨ğ—”ğ—¡ ğ—”ğ— ğ—•ğ—œğ—Ÿ ğ—•ğ—˜ğ—•ğ—˜ğ—¥ğ—”ğ—£ğ—” ğ—œğ—§ğ—˜ğ—  ğ—¬ğ—”ğ—¡ğ—š ğ——ğ—œğ—•ğ—¨ğ—§ğ—¨ğ—›ğ—ğ—”ğ—¡  ğ—¬ğ—”ğ—¡ğ—š ğ——ğ—œğ—£ğ—˜ğ—¥ğ—Ÿğ—¨ğ—ğ—”ğ—¡",
    "ğ—¦ğ—˜ğ—Ÿğ—”ğ—Ÿğ—¨ ğ—¦ğ—œğ— ğ—£ğ—”ğ—¡ ğ—¨ğ—”ğ—¡ğ—šğ— ğ—¨ ğ—”ğ—šğ—”ğ—¥ ğ—§ğ—œğ——ğ—”ğ— ğ——ğ—œğ—–ğ—¨ğ—¥ğ—œ",
    "ğ—¦ğ—˜ğ— ğ—”ğ—ğ—œğ—¡ ğ—§ğ—œğ—¡ğ—šğ—šğ—œ ğ—Ÿğ—˜ğ—©ğ—˜ğ—Ÿ ğ—£ğ—˜ğ—§ ğ— ğ—¨, ğ—¦ğ—˜ğ— ğ—”ğ—ğ—œğ—¡ ğ—ğ—¨ğ—”ğ—§ ğ—£ğ—¢ğ—ªğ—˜ğ—¥ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—•ğ—˜ğ—¥ğ—§ğ—”ğ—¥ğ—¨ğ—¡ğ—š!",
    "ğ—›ğ—”ğ—¥ğ—§ğ—” ğ—ğ—”ğ—¥ğ—¨ğ—¡ ğ——ğ—œğ—§ğ—˜ğ— ğ—¨ğ—ğ—”ğ—¡ ğ——ğ—œ ğ—›ğ—¨ğ—§ğ—”ğ—¡ ğ— ğ—¢ğ—¡ğ—Ÿğ—œğ—šğ—›ğ—§!",
    "ğ—¦ğ—˜ğ—Ÿğ—˜ğ—¦ğ—”ğ—œğ—ğ—”ğ—¡ ğ—•ğ—˜ğ—•ğ—˜ğ—¥ğ—”ğ—£ğ—” ğ— ğ—œğ—¦ğ—œ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ— ğ—•ğ—¨ğ—ğ—” ğ—™ğ—œğ—§ğ—¨ğ—¥ ğ—•ğ—”ğ—¥ğ—¨!",
    "ğ—£ğ—˜ğ—¡ğ—¬ğ—œğ—›ğ—œğ—¥ ğ—ğ—”ğ—›ğ—”ğ—§ ğ—¦ğ—˜ğ——ğ—”ğ—¡ğ—š ğ— ğ—˜ğ—¥ğ—”ğ—£ğ—”ğ—Ÿ ğ— ğ—”ğ—¡ğ—§ğ—¥ğ—”, ğ—¥ğ—”ğ—–ğ—œğ— ğ——ğ—”ğ—¡ ğ— ğ—œğ—¡ğ—¨ğ— ğ—Ÿğ—”ğ—› ğ—¥ğ—”ğ— ğ—¨ğ—”ğ—¡ ğ—¬ğ—”ğ—¡ğ—š ğ—ğ—”ğ— ğ—¨ ğ—•ğ—¨ğ—”ğ—§ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—•ğ—˜ğ—¥ğ—§ğ—”ğ—›ğ—”ğ—¡ ğ——ğ—”ğ—¥ğ—œ ğ—¦ğ—˜ğ—¥ğ—”ğ—¡ğ—šğ—”ğ—¡ ğ—£ğ—˜ğ—¡ğ—¬ğ—œğ—›ğ—œğ—¥ ğ—œğ—§ğ—¨!",
    "ğ—§ğ—˜ğ—¥ğ—ğ—”ğ——ğ—”ğ—¡ğ—š ğ—•ğ—˜ğ—•ğ—˜ğ—¥ğ—”ğ—£ğ—” ğ—£ğ—˜ğ—¡ğ—¬ğ—œğ—›ğ—œğ—¥ ğ——ğ—”ğ—§ğ—”ğ—¡ğ—š ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—¥ğ—”ğ— ğ—£ğ—¢ğ— ğ—¨ğ—”ğ—¡ğ—š ğ—ğ—”ğ— ğ—¨ ğ—¦ğ—˜ğ—–ğ—”ğ—¥ğ—” ğ——ğ—œğ—”ğ—  ğ——ğ—œğ—”ğ— !",
    "ğ——ğ—”ğ—£ğ—”ğ—§ğ—ğ—”ğ—¡ ğ—•ğ—”ğ—Ÿğ—”ğ—¡ğ—–ğ—˜ ğ—¦ğ—”ğ— ğ—£ğ—œğ—¡ğ—šğ—”ğ—¡ ğ——ğ—”ğ—¡ ğ—ğ—”ğ——ğ—œğ—Ÿğ—”ğ—› ğ—£ğ—¥ğ—˜ğ— ğ—œğ—¨ğ—  ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—–ğ—˜ğ—£ğ—”ğ—§ ğ—ğ—”ğ—¬ğ—” !",
    "ğ—”ğ—› ğ—§ğ—œğ——ğ—”ğ—›, ğ—£ğ—˜ğ—§ ğ—ğ—¨ğ—–ğ—œğ—¡ğ—š ğ—ğ—˜ğ—Ÿğ—”ğ—£ğ—”ğ—¥ğ—”ğ—¡. ğ—”ğ—¬ğ—¢ ğ—•ğ—˜ğ—¥ğ—œ ğ— ğ—”ğ—ğ—”ğ—¡ ğ—¦ğ—˜ğ—•ğ—˜ğ—Ÿğ—¨ğ—  ğ—£ğ—¢ğ—ªğ—˜ğ—¥ ğ—£ğ—˜ğ—§ ğ— ğ—¨ ğ—›ğ—œğ—Ÿğ—”ğ—¡ğ—š!",
    "ğ—Ÿğ—”ğ—ğ—¨ğ—ğ—”ğ—¡ ğ—ğ—¨ğ—”ğ—Ÿ ğ—•ğ—˜ğ—Ÿğ—œ ğ——ğ—œ ğ—¦ğ—›ğ—¢ğ—£!",
    "ğ—¦ğ—˜ğ—šğ—˜ğ—¥ğ—” ğ—•ğ—˜ğ—¥ğ—œ ğ— ğ—”ğ—ğ—”ğ—¡ ğ—£ğ—˜ğ—§ ğ—–ğ—˜ğ—¡ğ—§ğ—”ğ—¨ğ—¥ ğ—ğ—”ğ— ğ—¨ ğ—”ğ—šğ—”ğ—¥ ğ—£ğ—¨ğ—Ÿğ—œğ—› ğ—ğ—˜ğ— ğ—•ğ—”ğ—Ÿğ—œ!",
    "ğ—¥ğ—”ğ—ğ—” ğ—šğ—¢ğ—•ğ—Ÿğ—œğ—¡ ğ—¦ğ—”ğ—¡ğ—šğ—”ğ—§ ğ—Ÿğ—œğ—¡ğ—–ğ—”ğ—›!, ğ—ğ—”ğ—¡ğ—šğ—”ğ—¡ ğ—•ğ—œğ—”ğ—¥ğ—ğ—”ğ—¡ ğ—•ğ—”ğ—¥ğ—”ğ—¡ğ—š ğ—ğ—”ğ— ğ—¨ ğ—›ğ—œğ—Ÿğ—”ğ—¡ğ—š ğ—¦ğ—˜ğ—–ğ—”ğ—¥ğ—” ğ—§ğ—œğ—•ğ—” ğ—§ğ—œğ—•ğ—”",
    "ğ—§ğ—œğ—¡ğ—šğ—ğ—”ğ—§ğ—ğ—”ğ—¡ ğ——ğ—¨ğ—¥ğ—”ğ—•ğ—œğ—Ÿğ—œğ—§ğ—¬ ğ—©ğ—˜ğ—¦ğ—§ ğ—ğ—”ğ— ğ—¨ ğ—”ğ—šğ—”ğ—¥ ğ—¦ğ—˜ğ— ğ—”ğ—ğ—œğ—¡ ğ—ğ—¨ğ—”ğ—§",
    "ğ—•ğ—˜ğ—•ğ—˜ğ—¥ğ—”ğ—£ğ—” ğ—•ğ—”ğ—¡ğ—šğ—¨ğ—¡ğ—”ğ—¡ ğ—§ğ—¨ğ—” ğ——ğ—œğ—§ğ—˜ğ— ğ—¨ğ—ğ—”ğ—¡ ğ——ğ—œğ—£ğ—¨ğ—Ÿğ—”ğ—¨!",
    "ğ—ğ—¨ğ—”ğ—Ÿ ğ—œğ—§ğ—˜ğ—  ğ—¬ğ—”ğ—¡ğ—š ğ—§ğ—œğ——ğ—”ğ— ğ——ğ—œğ—šğ—¨ğ—¡ğ—”ğ—ğ—”ğ—¡ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—¡ğ——ğ—”ğ—£ğ—”ğ—§ ğ—Ÿğ—˜ğ—•ğ—œğ—› ğ—•ğ—”ğ—¡ğ—¬ğ—”ğ— ğ—¨ğ—”ğ—¡ğ—š!",
    "ğ—•ğ—œğ—”ğ—¦ğ—”ğ—¡ğ—¬ğ—” ğ—¢ğ—ªğ—¡ğ—˜ğ—¥ ğ— ğ—˜ğ— ğ—•ğ—˜ğ—¥ğ—œ ğ—›ğ—”ğ——ğ—œğ—”ğ—› ğ—¬ğ—”ğ—¡ğ—š ğ— ğ—˜ğ—¡ğ—”ğ—¥ğ—œğ— ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—ğ—”ğ—Ÿğ—œğ—”ğ—¡!",
    "ğ—ğ—˜ğ—Ÿğ—¢ğ— ğ—£ğ—¢ğ— ğ—£ğ—˜ğ—¡ğ—ğ—”ğ—¥ğ—”ğ—› ğ—§ğ—˜ğ—Ÿğ—”ğ—¡ğ—š ğ——ğ—”ğ—§ğ—”ğ—¡ğ—š, ğ—¦ğ—˜ğ— ğ—•ğ—¨ğ—¡ğ—¬ğ—œ ğ—”ğ—§ğ—”ğ—¨ ğ—Ÿğ—”ğ—ªğ—”ğ—¡?",
    "ğ—ğ—”ğ—¡ğ—šğ—”ğ—¡ ğ—•ğ—œğ—”ğ—¥ğ—ğ—”ğ—¡ ğ—¢ğ—¥ğ—”ğ—¡ğ—š ğ—Ÿğ—”ğ—œğ—¡ ğ— ğ—˜ğ—¡ğ——ğ—”ğ—£ğ—”ğ—§ ğ—§ğ—¢ğ—£ ğ—”ğ—–ğ—›ğ—œğ—˜ğ—©ğ—˜ğ— ğ—˜ğ—¡ğ—§!",
    "ğ—›ğ—”ğ—›?, ğ— ğ—¨ğ—¦ğ—œğ—  ğ—šğ—¨ğ—šğ—¨ğ—¥ ğ—§ğ—˜ğ—Ÿğ—”ğ—› ğ—§ğ—œğ—•ğ—”?. ğ—ªğ—”ğ—ğ—§ğ—¨ ğ—¬ğ—”ğ—¡ğ—š ğ—§ğ—˜ğ—£ğ—”ğ—§ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ—•ğ—˜ğ—¥ğ—¦ğ—”ğ—¡ğ—§ğ—”ğ—œ ğ—¦ğ—”ğ— ğ—•ğ—œğ—Ÿ ğ— ğ—˜ğ— ğ—”ğ—¡ğ—–ğ—œğ—¡ğ—š",
    "ğ—”ğ— ğ—•ğ—œğ—Ÿ ğ—§ğ—¢ğ—¡ğ—šğ—ğ—”ğ—§ ğ—Ÿğ—¨ğ—­ğ—›ğ—œğ—¥ğ—¢ ğ——ğ—”ğ—¥ğ—œ ğ—¡ğ—˜ğ—¡ğ—˜ğ— ğ—¦ğ—œğ—›ğ—œğ—¥ ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—¡ğ—šğ—¨ğ—”ğ—¦ğ—”ğ—œ ğ——ğ—¨ğ—¡ğ—œğ—”!",
    "ğ——ğ—”ğ—£ğ—”ğ—§ğ—ğ—”ğ—¡ ğ—”ğ—ğ—¦ğ—˜ğ—¦ ğ—£ğ—¥ğ—˜ğ— ğ—œğ—¨ğ—  ğ—¨ğ—¡ğ—§ğ—¨ğ— ğ— ğ—˜ğ—¡ğ—šğ—šğ—¨ğ—¡ğ—”ğ—ğ—”ğ—¡ ğ—¦ğ—˜ğ— ğ—¨ğ—” ğ—™ğ—œğ—§ğ—¨ğ—¥ ğ—”ğ—šğ—”ğ—¥ ğ—Ÿğ—˜ğ—•ğ—œğ—› ğ—šğ—”ğ— ğ—£ğ—”ğ—¡ğ—š ğ— ğ—˜ğ—¡ğ—ğ—”ğ——ğ—œ ğ—§ğ—¢ğ—£ ğ—šğ—Ÿğ—¢ğ—•ğ—”ğ—Ÿ!",
    "ğ—¦ğ—˜ğ—Ÿğ—”ğ—Ÿğ—¨ ğ—£ğ—”ğ—¡ğ—§ğ—”ğ—¨ ğ—”ğ—ğ—§ğ—œğ—©ğ—œğ—§ğ—”ğ—¦ ğ—§ğ—˜ğ— ğ—”ğ—¡ğ— ğ—¨!, ğ—•ğ—œğ—¦ğ—” ğ—ğ—”ğ——ğ—œ ğ—œğ—§ğ—¨ ğ— ğ—˜ğ—¡ğ—–ğ—¨ğ—¥ğ—œğ—šğ—”ğ—ğ—”ğ—¡!",
    "ğ—ğ—”ğ——ğ—œğ—Ÿğ—”ğ—› ğ—”ğ——ğ—©ğ—˜ğ—¡ğ—§ğ—¨ğ—¥ğ—˜ ğ—§ğ—˜ğ—¥ğ—•ğ—”ğ—œğ—!",
    "ğ—”ğ——ğ—¨ ğ—£ğ—˜ğ—§ ğ—ğ—”ğ— ğ—¨ ğ—¦ğ—˜ğ—ğ—”ğ—¥ğ—”ğ—¡ğ—š!",
    "ğ—›ğ—”ğ—Ÿğ—Ÿğ—¢ ğ—©ğ—˜ğ—¡ğ——ğ—¢ğ—¥ğ—”!"
];

let isRunning = false;  // Variable to control the running state of the function

let handler = async (m, { conn, isOwner }) => {
    if (!isOwner) {
        return conn.reply(m.chat, '*Kamu tidak memiliki izin untuk menjalankan perintah ini.*', m);
    }

    if (isRunning) {
        return conn.reply(m.chat, '*Sistem randomchat sudah berjalan.*', m);
    }

    isRunning = true;  // Set the running state to true

    const sendRandomMessages = async () => {
        while (isRunning) {  // Infinite loop to keep sending messages
            let randomMessage = messages[Math.floor(Math.random() * messages.length)];
            let randomDelay = Math.floor(Math.random() * (2400000 - 900000 + 1)) + 900000;

            // Ambil pengguna acak dari database
            let users = Object.keys(global.db.data.users);
            let randomUser = users[Math.floor(Math.random() * users.length)];
            let taggedMessage = randomMessage.replace('@tagusersecaraacak', `@${randomUser.split('@')[0]}`);

            await conn.reply(m.chat, taggedMessage, m, {
                mentions: [randomUser]
            });

            await new Promise(resolve => setTimeout(resolve, randomDelay));
        }
    };

    sendRandomMessages().catch(err => {
        console.error(err);
        conn.reply(m.chat, '*Terjadi kesalahan saat mengirim pesan.*', m);
        isRunning = false;  // Reset the running state in case of error
    });
};

handler.help = ['Informasi'];
handler.tags = ['owner'];
handler.command = /^(ğŸ•µï¸)$/i;

handler.owner = true;

module.exports = handler;